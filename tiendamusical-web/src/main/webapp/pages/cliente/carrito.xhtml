
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<!-- permite incluir contenido de otras pantallas para usar scripts.xhtml-->



<h:head>
	<ui:include src="/pages/commons/scripts.xhtml"></ui:include>

	<style>
body .ui-panelgrid .ui-panelgrid-cell {
	border: 1px solid #c8c8c8;
	background-color: rgb(0 0 0/ 80%);
	color: #333;
	padding: 0.571em 1em;
}

.dialogCentro{
	top:50% !important;
}

</style>
</h:head>

<h:body style="background-color:black;">


	<div class="ui-fluid">
		<h:form id="formCarrito">

			<ui:include src="/pages/commons/navbar.xhtml"></ui:include>

			<div class="p-grid sample-layout">

				<ui:include src="/pages/commons/header.xhtml"></ui:include>

				<div class="p-col-12 p-md-10 p-col-nogutter"
					style="background-color: black">
					<div class="p-grid">
						<div class="p-col-12">

						 <ui:include src="/pages/commons/steps.xhtml"></ui:include> 

							<div class="p-col" style="width:90%;margin:0px auto;">

								<p:dataView id="dataViewDetalleCarrito" rowIndexVar="index" 
								var="carritoAlbum" value="#{sessionBean.persona.carrito.carritosAlbum}" listIcon="pi pi-bars">

									<p:dataViewListItem style="background-color:black;">
										<h:panelGrid columns="5" 
										columnClasses="ui-g-12 ui-md-2, ui-g-12 ui-md-4, ui-g-12 ui-md-2, ui-g-12 ui-md-2, 
													ui-g-12 ui-md-2, logo, detail" layout="grid" 
											style="width:100%;text-align:center;background-color:black;border:none;">

											<p:graphicImage	name="imagenes/albums/#{carritoAlbum.album.imagen}" style="width: 100%" />

											<p:outputPanel>
												<h:panelGrid columns="2" cellPadding="5">

													<h:outputText value="Titulo" style="color:white;" />
													<h:outputText value="#{carritoAlbum.album.nombre}" style="color:white;" />

													<h:outputText value="Artista" style="color:white;" />
													<h:outputText value="#{carritoAlbum.album.artista.nombre}" style="color:white;" />

													<h:outputText value="Disquera" style="color:white;" />
													<h:outputText value="#{carritoAlbum.album.disquera.descripcion}" style="color:white;" />
													
													<h:outputText value="Precio" style="color:white;" />
													<h:outputText value="#{carritoAlbum.album.valor}" style="color:white;">
														<f:convertNumber type="currency" currencyCode="MXN" currencySymbol="$"></f:convertNumber>
													</h:outputText>

												</h:panelGrid>
											</p:outputPanel>
											
												<p:selectOneMenu id="cboCantidad" value="#{carritoAlbum.cantidad}">
													<f:selectItem itemValue="1" itemLabel="1" ></f:selectItem>
													<f:selectItem itemValue="2" itemLabel="2" ></f:selectItem>
													<f:selectItem itemValue="3" itemLabel="3" ></f:selectItem>
													<f:selectItem itemValue="4" itemLabel="4" ></f:selectItem>
													<f:selectItem itemValue="5" itemLabel="5" ></f:selectItem>
													
													<p:ajax event="change" listener="#{carritoController.actualizarCantidadCarrito(carritoAlbum)}" 
													update="formCarrito:pnlTotalCompra,formCarrito:dataViewDetalleCarrito"></p:ajax>
												</p:selectOneMenu>
										
												<p:commandButton icon="pi pi-trash" style="background-color: red;border: none;" 
												action="#{carritoController.eliminarAlbumCarrito(carritoAlbum)}" 
													update="formCarrito:menubar,formCarrito:dataViewDetalleCarrito,formCarrito:pnlTotalCompra,formCarrito:pnlContinuar">
													<p:confirm header="Confirmar" message="Â¿Estas seguro de eliminar el producto #{carritoAlbum.album.nombre}?" 
													icon="pi pi-exclamation-triangle"/>
												</p:commandButton>
												
										        <p:confirmDialog class="dialogCentro" global="true" showEffect="fade" hideEffect="fade" responsive="true" width="350">
										            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no ui-button-flat"/>
										            <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" />
										        </p:confirmDialog>
        
												<p:outputLabel value="#{carritoAlbum.album.valor * carritoAlbum.cantidad}"
												style="color:white">
													<f:convertNumber type="currency" currencyCode="MXN" currencySymbol="$"> </f:convertNumber>
												</p:outputLabel>
										</h:panelGrid>
										
										
									</p:dataViewListItem>

								</p:dataView>

								<h:panelGrid id="pnlTotalCompra" columns="5" 
										columnClasses="ui-g-12 ui-md-2, ui-g-12 ui-md-4, ui-g-12 ui-md-2, ui-g-12 ui-md-2, 
													ui-g-12 ui-md-2, logo, detail" layout="grid" 
											style="width:100%;text-align:center;background-color:black;border:none;">
											
												<p:outputLabel value="" style="color:white"></p:outputLabel>
												<p:outputLabel value="" style="color:white"></p:outputLabel>
												<p:outputLabel value="" style="color:white"></p:outputLabel>

												<p:outputLabel value="Total : " style="color:white"></p:outputLabel>
												<p:outputLabel value="#{carritoController.sessionBean.totalCompra}" style="color:white">
														<f:convertNumber type="currency" currencyCode="MXN" currencySymbol="$"> </f:convertNumber>
												</p:outputLabel>
												
												
								</h:panelGrid>
								
								<h:panelGrid  id="pnlContinuar" columns="5" 
										columnClasses="ui-g-12 ui-md-2, ui-g-12 ui-md-4, ui-g-12 ui-md-2, ui-g-12 ui-md-2, 
													ui-g-12 ui-md-2, logo, detail" layout="grid" 
											style="width:100%;text-align:center;background-color:black;border:none;">
											
												<p:outputLabel value="" style="color:white"></p:outputLabel>
												<p:outputLabel value="" style="color:white"></p:outputLabel>
												<p:outputLabel value="" style="color:white"></p:outputLabel>
												<p:outputLabel value="" style="color:white"></p:outputLabel>

								<p:commandButton value="Continuar" action="#{pasosController.cambiarPasos('/pages/cliente/pago.xhtml',1)}"
									style="margin-top: 20px; width:80%;"
									disabled="#{empty carritoController.sessionBean.persona.carrito.carritosAlbum}">
									
									</p:commandButton>
												
												
								</h:panelGrid>
								

								</div>

						</div>
						<!-- fin p-col-12 -->
					</div>
				</div>

				<ui:include src="/pages/commons/footer.xhtml"></ui:include>

			</div>
		</h:form>
	</div>



</h:body>

</html>

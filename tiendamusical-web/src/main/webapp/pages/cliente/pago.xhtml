<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<!-- permite incluir contenido de otras pantallas para usar scripts.xhtml-->



<h:head>
	<ui:include src="/pages/commons/scripts.xhtml"></ui:include>


	<script src="https://www.paypal.com/sdk/js?client-id=AZPg1T11HbYLBEu3cpdD50OQj1Q-ksfYh6eShueWbyF10EePrzX-wkwQZCvS16uFHGvAZUQoZhhVCE0F&amp;currency=MXN"></script>


<!-- 
 		 <script src="https://www.paypal.com/sdk/js?client-id=ATEir5IbJm02uOzMfNPZw48iYRuJsoScedFxjThUfQnB1eh5Soal3FAWUQsfFettOs11DDURnRxXiQBo&amp;currency=MXN"></script>
		  -->
 
	<script>
		paypal.Buttons({
		createOrder: function(data, actions){
			return fetch('../../PayPalServlet',{
				method: 'post',
				headers: {
					'content-type':'application/json'
				}
				}).then(function(response){
						var json = response.json();
						console.log("RESPONSE " + json);
						return json;
				}).then(function(data){
					
					console.log("DATA " + data);
					return data.result.id;
				})
			},
			onApprove: function(data, actions){
				return actions.order.capture().then(function(detalle){
					//generar factura con orden de compra
					finalizarTransaccion();
				})
			}
		}).render('#divPayPalContainer');</script>
	
	<style>
		body .ui-panelgrid .ui-panelgrid-cell {
			border: 1px solid #c8c8c8;
			background-color: rgb(0 0 0/ 80%);
			color: #333;
			padding: 0.571em 1em;
		}
		
		.dialogCentro{
			top:50% !important;
		}
	</style>
	
</h:head>

<h:body style="background-color:black;">

	<div class="ui-fluid">
		<h:form id="formPago">

			<ui:include src="/pages/commons/navbar.xhtml"></ui:include>

			<div class="p-grid sample-layout">

				<ui:include src="/pages/commons/header.xhtml"></ui:include>

				<div class="p-col-12 p-md-10 p-col-nogutter"
					style="background-color: black">
					<div class="p-grid">
						<div class="p-col-12">

						 <ui:include src="/pages/commons/steps.xhtml"></ui:include>

							<div class="p-col" style="width: 90%;margin: 0px auto; text-align: center;">
								<div id="divPayPalContainer" class="p-col" style="width: 100%; margin: 0px auto;">                            
									<p:remoteCommand name="finalizarTransaccion" action="#{pagoController.guardarFactura}"></p:remoteCommand>
								
								</div>
							</div>
							
									<h:panelGrid  columns="5" 
											columnClasses="ui-g-12 ui-md-2, ui-g-12 ui-md-4, ui-g-12 ui-md-2, ui-g-12 ui-md-2, 
														ui-g-12 ui-md-2, logo, detail" layout="grid" 
												style="width:100%;text-align:center;background-color:black;border:none;">
												
													<p:outputLabel value="" style="color:white"></p:outputLabel>
													<p:outputLabel value="" style="color:white"></p:outputLabel>
													<p:outputLabel value="" style="color:white"></p:outputLabel>
													<p:outputLabel value="" style="color:white"></p:outputLabel>
	
									<p:commandButton value="Continuar" 
										style="margin-top: 20px; width:80%;"
										disabled="#{empty carritoController.sessionBean.persona.carrito.carritosAlbum}">
										
										</p:commandButton>
													
													
									</h:panelGrid>

						</div>
						<!-- fin p-col-12 -->
					</div>
				</div>

				<ui:include src="/pages/commons/footer.xhtml"></ui:include>

			</div>
		</h:form>
	</div>


</h:body>

</html>
